<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app">
    </div>
    <div id="other"></div>
    <script src="./dist/reactivity.global.js"></script>
    <!-- <script src="../../node_modules/vue/dist/vue.global.js"></script> -->
    <script>
        let { watch, effect,reactive } = VueReactivity;
        // let { watch,reactive,effect } = Vue;

        let state = reactive({
             name : 'tpx',
             age : 26,
             address : {
                 address1 : {
                     name1 : '123'
                 },
                 name : '12'
             }
        })

        // watch(state.address,(newValue,oldValue) => {
        //      console.log('watch执行',newValue,oldValue)
        //      app.innerHTML = `${state.address.name}`
        // })
        // effect(() => {
        //     console.log('effect执行')
        //     app.innerHTML = `${state.address.name}`
        // })
        // // 直接watch一个响应式对象，后续直接把这整个对象改了，是不会触发watch的，
        // // 因为watch监控的是这个对象的所有属性而不是这个对象
        // setTimeout(() => {
        //     不会触发
        //     state.address = {
        //         name : '新的address地址'
        //     }
        //     state.address.address1 = '123'
        // },1000)

        // watch一个函数则相反，改变此对象会触发，改变对象的属性不会。
        // 因为传入函数watch内部，只会监控它的返回值。不会深度遍历这个对象
        // watch(() => state.address,(newValue,oldValue) => {
        //      console.log('watch执行',newValue,oldValue)
        //      app.innerHTML = `${state.address.name}`
        // })

        // setTimeout(() => {
        //      // 不会触发
        //     // state.address.name= '新的address地址'
        //     // 会触发
        //     state.address = {
        //          name : '新的address地址'
        //     }
        // },1000)

        // watch 第三个参数

        watch(() => state.age,(newValue,oldValue) => {
            console.log('watch立即执行一次',newValue,oldValue)
        },{
            immediate:true
        })

    </script>
</body>
</html>